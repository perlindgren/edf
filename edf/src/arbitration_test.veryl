#[test(arbitration)]
embed (inline) sv{{{

    module test;
        logic[7:0] i_abs_dl[8]; 
        logic i_pend[8];
        logic o_pend;
        int now;

        edf_Arbitration dut (
            .i_abs_dl,
            .i_pend,
            .o_pend
        );

        task tick (int x);
            # x;
		    now = now + x;
	    endtask

        function void pend(logic [2:0] i, inout logic i_p[8]);
            $display("i ", i);
            i_p[i] = 1;
            
            $display("i_pend ", i_p[0]);
            $display("i_pend ", i_p[1]);
            $display("i_pend ", i_p[2]);
            $display("i_pend ", i_p[3]);
            $display("i_pend ", i_p[4]);
        endfunction

        initial begin
            i_pend = '{default: 0}; 
            now = 0;
            
            tick(10);
            pend(0, i_pend);
            
            tick(20);
            pend(1, i_pend);

            tick(10);
        end
    endmodule
}}}
